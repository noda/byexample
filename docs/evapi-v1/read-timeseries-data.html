<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="EnergyView APIv1: Read TimeSeries data">
    <meta property="og:description" content="EnergyView APIv1: Read TimeSeries data">
    <meta property="og:url" content="https://byexample.noda.se/evapi-v1/read-timeseries-data.html">
    <meta property="og:image" content="https://byexample.noda.se/images/byexample.png">
    <meta property="og:image:secure_url" content="https://byexample.noda.se/images/byexample.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />

    <title>EnergyView APIv1: Read TimeSeries data</title>
    
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/nord-darker.css">
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-12">
            <h1>EnergyView APIv1: Read TimeSeries data</h1>
<p><a href="/index.html">Back to index</a></p>
<p>The ability to read or extract TimeSeries data via requests is the second most important function of the EnergyView API. It is only preceded by the function to store data in the database.</p>
<p>We designed the TimeSeries API to be as easy to use as possible while allowing for more complex use cases.</p>
<blockquote>
<p><strong>NOTE</strong>: It is essential to escape certain characters that are part of the URL. The <code>+</code>, for example, is used to indicate a space in a URL. Suppose you do not escape the <code>+</code> in, for instance, an RFC3339 timestamp. Then, the format will be treated as invalid once parsed by the server.<br />
Whether you are required to escape the character manually or if the HTTP library you are using does this depends on the library's functionality.</p>
</blockquote>
<h2>Basic example with a single tag</h2>
<p>In the following example we extract data from a single tag on a single node.</p>
<p>To allow for more complex use-cases, the id of a Node can be either an <code>integer</code> or a <code>UUID</code>.</p>
<p>We need to specify the following;</p>
<ul>
<li><em>node_id</em>, the unique identifier for the node we want to extract data from.</li>
<li><em>tag</em>, the name of the tag we want to extract data from which belongs to the node.</li>
<li><em>start</em>, the start date and time for the data we want to extract. The format is <a href="/various/rfc3339.html">RFC3339</a>.</li>
<li><em>end</em>, the end date and time for the data we want to extract. The format is <a href="/various/rfc3339.html">RFC3339</a>.</li>
</ul>
<div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="wxStNf" role="tablist">
                    <li class="nav-item" role="presentation"><button class="nav-link active" id="ujLyOd-tab" data-bs-toggle="tab" data-bs-target="#ujLyOd" type="button" role="tab" aria-controls="ujLyOd" aria-selected="true">Python</button></li><li class="nav-item" role="presentation"><button class="nav-link " id="lCWqyR-tab" data-bs-toggle="tab" data-bs-target="#lCWqyR" type="button" role="tab" aria-controls="lCWqyR" aria-selected="true">Bash</button></li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content" id="wxStNf-content">
                    <div class="tab-pane active" id="ujLyOd" role="tabpanel" aria-labelledby="ujLyOd-tab"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">domain</span> <span class="o">=</span> <span class="s2">&quot;demo&quot;</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s2">&quot;demo-secret&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Key </span><span class="si">{</span><span class="n">secret</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://customer.noda.se/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/api/v1/timeseries&quot;</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;node_id&quot;</span><span class="p">:</span> <span class="s2">&quot;be65cf3b-dec1-479f-981f-54157d8588ff&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;outdoortemp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-01-01T00:00:00+01:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-01-02T00:00:00+01:00&quot;</span>
<span class="p">}</span>

<span class="n">reply</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">reply</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div></td></tr></table></div>
</div><div class="tab-pane " id="lCWqyR" role="tabpanel" aria-labelledby="lCWqyR-tab"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>GET<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Key demo-secret&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-H<span class="w"> </span><span class="s2">&quot;Accept: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;node_id&quot;:&quot;be65cf3b-dec1-479f-981f-54157d8588ff&quot;,&quot;tag&quot;:&quot;outdoortemp&quot;,&quot;start&quot;:&quot;2023-01-01T00:00:00+01:00&quot;,&quot;end&quot;:&quot;2023-01-02T00:00:00+01:00&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>https://customer.noda.se/demo/api/v1/timeseries
</pre></div></td></tr></table></div>
</div>
                </div>
            </div>
        </div><p>The format of the returned data is a JSON array of objects with the following fields:</p>
<div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="kYuiwd" role="tablist">
                    <li class="nav-item" role="presentation"><button class="nav-link active" id="GiMKPt-tab" data-bs-toggle="tab" data-bs-target="#GiMKPt" type="button" role="tab" aria-controls="GiMKPt" aria-selected="true">JSON</button></li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content" id="kYuiwd-content">
                    <div class="tab-pane active" id="GiMKPt" role="tabpanel" aria-labelledby="GiMKPt-tab"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;timeseries&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;node_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;be65cf3b-dec1-479f-981f-54157d8588ff&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;outdoortemp&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.14</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T00:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.15</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T01:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.16</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T02:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.17</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T03:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="err">...</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>
</div>
                </div>
            </div>
        </div><p>As you can see, the data is returned as a JSON array of objects. Each object contains the <code>node_id</code>, the <code>tag</code> and the <code>data</code> for that specific tag. The purpose of the array is to allow for multiple tags to be returned in a single request.</p>
<h2>Basic example with multiple tags</h2>
<p>In the following example we extract data from multiple tags on multiple nodes.</p>
<p>To allow for more complex use-cases, the id of a Node can be either an <code>integer</code> or a <code>UUID</code>.</p>
<p>We need to specify the following;</p>
<ul>
<li><em>node_ids</em>, the unique identifier for the nodes we want to extract data from.</li>
<li><em>tags</em>, the names of the tags we want to extract data fromm which belongs to the node.</li>
<li><em>start</em>, the start date and time for the data we want to extract. The format is <a href="/various/rfc3339.html">RFC3339</a>.</li>
<li><em>end</em>, the end date and time for the data we want to extract. The format is <a href="/various/rfc3339.html">RFC3339</a>.</li>
</ul>
<div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="UfMdzk" role="tablist">
                    <li class="nav-item" role="presentation"><button class="nav-link active" id="nSRhBg-tab" data-bs-toggle="tab" data-bs-target="#nSRhBg" type="button" role="tab" aria-controls="nSRhBg" aria-selected="true">Python</button></li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content" id="UfMdzk-content">
                    <div class="tab-pane active" id="nSRhBg" role="tabpanel" aria-labelledby="nSRhBg-tab"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">domain</span> <span class="o">=</span> <span class="s2">&quot;demo&quot;</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s2">&quot;demo-secret&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Key </span><span class="si">{</span><span class="n">secret</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://customer.noda.se/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/api/v1/timeseries&quot;</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;node_ids&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span>
            <span class="s2">&quot;be65cf3b-dec1-479f-981f-54157d8588ff&quot;</span><span class="p">,</span>
            <span class="s2">&quot;64c1faf9-b23c-4f6d-9429-b2b3f5e4811d&quot;</span>
        <span class="p">]),</span>
    <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span>
            <span class="s2">&quot;outdoortemp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;supplytemp_sec&quot;</span><span class="p">,</span>
            <span class="s2">&quot;returntemp_sec&quot;</span>
        <span class="p">]),</span>
    <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-01-01T00:00:00+01:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-01-02T00:00:00+01:00&quot;</span>
<span class="p">}</span>

<span class="n">reply</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">reply</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div></td></tr></table></div>
</div>
                </div>
            </div>
        </div><p>The format of the returned data is the same as for the first Basic example with a single tag. The only difference is that there will be several objects inside the timeseries array:</p>
<div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="ptnGal" role="tablist">
                    <li class="nav-item" role="presentation"><button class="nav-link active" id="mnAeWk-tab" data-bs-toggle="tab" data-bs-target="#mnAeWk" type="button" role="tab" aria-controls="mnAeWk" aria-selected="true">JSON</button></li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content" id="ptnGal-content">
                    <div class="tab-pane active" id="mnAeWk" role="tabpanel" aria-labelledby="mnAeWk-tab"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;timeseries&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;node_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;be65cf3b-dec1-479f-981f-54157d8588ff&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;outdoortemp&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.14</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T00:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.15</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T01:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.16</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T02:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.17</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T03:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="err">...</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;node_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;be65cf3b-dec1-479f-981f-54157d8588ff&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;supplytemp_sec&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">87</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T00:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T01:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">86</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T02:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">85</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-01T03:00:00+01:00&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="err">...</span><span class="w">   </span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>
</div>
                </div>
            </div>
        </div><h2>Advanced example</h2>
<p>In the following example we extract data from a single node and a single tag while also specifying the aggregation method.</p>
<p>For aggregation of data to work we need to truncate the timestamps to the desired resolution, we also need to supply the aggregation method.</p>
<ul>
<li>
<code>resolution</code>, the resolution of the timestamps. Available options are;<ul>
<li>second</li>
<li>minute</li>
<li>5minute</li>
<li>10minute</li>
<li>15minute</li>
<li>20minute</li>
<li>30minute</li>
<li>hour</li>
<li>day</li>
<li>month</li>
<li>year</li>
<li>decade</li>
<li>century</li>
<li>millennia</li>
</ul>
</li>
<li>
<code>aggregate</code>, the aggregation method. Available options are;<ul>
<li>avg</li>
<li>min</li>
<li>max</li>
<li>sum</li>
<li>count</li>
</ul>
</li>
</ul>
<div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="GyJMWl" role="tablist">
                    <li class="nav-item" role="presentation"><button class="nav-link active" id="ybqLAj-tab" data-bs-toggle="tab" data-bs-target="#ybqLAj" type="button" role="tab" aria-controls="ybqLAj" aria-selected="true">Python</button></li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content" id="GyJMWl-content">
                    <div class="tab-pane active" id="ybqLAj" role="tabpanel" aria-labelledby="ybqLAj-tab"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">domain</span> <span class="o">=</span> <span class="s2">&quot;demo&quot;</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s2">&quot;demo-secret&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Key </span><span class="si">{</span><span class="n">secret</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://customer.noda.se/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/api/v1/timeseries&quot;</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;node_id&quot;</span><span class="p">:</span> <span class="s2">&quot;be65cf3b-dec1-479f-981f-54157d8588ff&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;outdoortemp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-01-01T00:00:00+01:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-02-01T00:00:00+01:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;resolution&quot;</span><span class="p">:</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span>
    <span class="s2">&quot;aggregate&quot;</span><span class="p">:</span> <span class="s2">&quot;avg&quot;</span>
<span class="p">}</span>

<span class="n">reply</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">reply</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div></td></tr></table></div>
</div>
                </div>
            </div>
        </div><p>Using aggregation will return computed values for the specified resolution.</p>
<p>To get the minimum value for each day we would use the following request:</p>
<div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="GXDRdX" role="tablist">
                    <li class="nav-item" role="presentation"><button class="nav-link active" id="LwuleJ-tab" data-bs-toggle="tab" data-bs-target="#LwuleJ" type="button" role="tab" aria-controls="LwuleJ" aria-selected="true">Python</button></li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content" id="GXDRdX-content">
                    <div class="tab-pane active" id="LwuleJ" role="tabpanel" aria-labelledby="LwuleJ-tab"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">domain</span> <span class="o">=</span> <span class="s2">&quot;demo&quot;</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s2">&quot;demo-secret&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Key </span><span class="si">{</span><span class="n">secret</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://customer.noda.se/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/api/v1/timeseries&quot;</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;node_id&quot;</span><span class="p">:</span> <span class="s2">&quot;be65cf3b-dec1-479f-981f-54157d8588ff&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;outdoortemp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-01-01T00:00:00+01:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-02-01T00:00:00+01:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;resolution&quot;</span><span class="p">:</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span>
    <span class="s2">&quot;aggregate&quot;</span><span class="p">:</span> <span class="s2">&quot;min&quot;</span>
<span class="p">}</span>

<span class="n">reply</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">reply</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div></td></tr></table></div>
</div>
                </div>
            </div>
        </div><h2>Epoch format</h2>
<p>The API also supports the UNIX epoch format for timestamps.</p>
<p>To use the UNIX epoch format we need to specify the <code>epoch</code> parameter.</p>
<div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="PataoU" role="tablist">
                    <li class="nav-item" role="presentation"><button class="nav-link active" id="EGxcgY-tab" data-bs-toggle="tab" data-bs-target="#EGxcgY" type="button" role="tab" aria-controls="EGxcgY" aria-selected="true">Python</button></li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content" id="PataoU-content">
                    <div class="tab-pane active" id="EGxcgY" role="tabpanel" aria-labelledby="EGxcgY-tab"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">domain</span> <span class="o">=</span> <span class="s2">&quot;demo&quot;</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s2">&quot;demo-secret&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Key </span><span class="si">{</span><span class="n">secret</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://customer.noda.se/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/api/v1/timeseries&quot;</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;node_id&quot;</span><span class="p">:</span> <span class="s2">&quot;be65cf3b-dec1-479f-981f-54157d8588ff&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;outdoortemp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-01-01T00:00:00+01:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-02-01T00:00:00+01:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;epoch&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="n">reply</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">reply</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div></td></tr></table></div>
</div>
                </div>
            </div>
        </div><p>Instead of timestamps in RFC3339 format, all timestamp will now use the number of seconds since the UNIX epoch (January 1st 1970).</p>
<div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="dzerEu" role="tablist">
                    <li class="nav-item" role="presentation"><button class="nav-link active" id="vXSDxs-tab" data-bs-toggle="tab" data-bs-target="#vXSDxs" type="button" role="tab" aria-controls="vXSDxs" aria-selected="true">JSON</button></li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content" id="dzerEu-content">
                    <div class="tab-pane active" id="vXSDxs" role="tabpanel" aria-labelledby="vXSDxs-tab"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;timeseries&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;node_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;be65cf3b-dec1-479f-981f-54157d8588ff&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;outdoortemp&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.14</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1640995200</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.15</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1641081600</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.16</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1641168000</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;v&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.17</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1641254400</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="err">...</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>
</div>
                </div>
            </div>
        </div>
            </div>
        </div>

        <footer class="footer col-12">
            by <a href="https://www.noda.se">NODA Intelligent Systems AB</a> |
            <a href="https://github.com/noda/byexample/blob/main/examples/evapi-v1/read-timeseries-data.md">source</a> |
            <a href="https://github.com/noda/byexample/blob/main/LICENSE">license</a> |
            Last updated: <span class="last-updated">March 21, 2023</span>
        </footer>
    </div>
    <script src="/js/bootstrap.bundle.min.js"></script>
</body>
</html>
